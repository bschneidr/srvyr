<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Summarise multiple values to a single value. — summarise • srvyr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Summarise multiple values to a single value. — summarise" />
<meta property="og:description" content="Summarise multiple values to a single value." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
<img src="../tools/logo.png" height="50" width="50" align="left" display="block" style="margin: -15px 10px 0px 0px">
        <a class="navbar-link" href="../index.html">srvyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/srvyr-vs-survey.html">Overview</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/srvyr-vs-survey.html">srvyr Compared to the survey Package (Overview)</a>
    </li>
    <li>
      <a href="../articles/srvyr-database.html">Databases in srvyr</a>
    </li>
    <li>
      <a href="../articles/extending-srvyr.html">Extending srvyr</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/gergness/srvyr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Summarise multiple values to a single value.</h1>
    <small class="dont-index">Source: <a href='https://github.com/gergness/srvyr/blob/master/R/summarise.r'><code>R/summarise.r</code></a></small>
    <div class="hidden name"><code>summarise.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Summarise multiple values to a single value.</p>
    </div>


    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.data</th>
      <td><p>tbl A <code>tbl_svy</code> object</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Name-value pairs of summarizing expressions, see details</p></td>
    </tr>
    <tr>
      <th>.groups</th>
      <td><p>Defaults to "drop_last" in srvyr meaning that the last group is peeled
off, but if there are more groups they will be preserved. Other options are "drop", which
drops all groups, "keep" which keeps all of them and "rowwise" which converts the object
to a rowwise object (meaning calculations will be performed on each row).</p></td>
    </tr>
    <tr>
      <th>.unpack</th>
      <td><p>Whether to "unpack" named <code>data.frame</code> columns. <code>srvyr</code> predates
<code>dplyr</code>'s support for data.frame columns so it does not treat them the same way by
default.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Summarise for <code>tbl_svy</code> objects accepts several specialized functions.
Each of the functions a variable (or two, in the case of
<code>survey_ratio</code>), from the data.frame and default to providing the measure
and its standard error.</p>
<p>The argument <code>vartype</code> can choose one or more measures of uncertainty,
<code>se</code> for standard error, <code>ci</code> for confidence interval, <code>var</code>
for variance, and <code>cv</code> for coefficient of variation. <code>level</code>
specifies the level for the confidence interval.</p>
<p>The other arguments correspond to the analogous function arguments from the
survey package.</p>
<p>The available functions from srvyr are:</p>
<dl>
<dt><code><a href='survey_mean.html'>survey_mean</a></code></dt><dd><p>Calculate the mean of a numeric variable or the proportion falling into <code>groups</code>
   for the entire population or by <code>groups</code>. Based on <code><a href='https://rdrr.io/pkg/survey/man/surveysummary.html'>svymean</a></code>
   and <code><a href='https://rdrr.io/pkg/survey/man/svyciprop.html'>svyciprop</a></code>.</p></dd>.
<dt><code><a href='survey_total.html'>survey_total</a></code></dt><dd><p>Calculate the survey total of the entire population or by <code>groups</code>.
   Based on <code><a href='https://rdrr.io/pkg/survey/man/surveysummary.html'>svytotal</a></code>.</p></dd>
<dt><code><a href='survey_mean.html'>survey_prop</a></code></dt><dd><p>Calculate the proportion of the entire population or by <code>groups</code>.
   Based on <code><a href='https://rdrr.io/pkg/survey/man/svyciprop.html'>svyciprop</a></code>.</p></dd>
 <dt><code><a href='survey_ratio.html'>survey_ratio</a></code></dt><dd><p>Calculate the ratio of 2 variables in the entire population or by <code>groups</code>.
   Based on <code><a href='https://rdrr.io/pkg/survey/man/svyratio.html'>svyratio</a></code>.</p></dd>
<dt><code><a href='survey_quantile.html'>survey_quantile</a></code> &amp; <code><a href='survey_quantile.html'>survey_median</a></code></dt><dd><p>Calculate quantiles in the entire population or by <code>groups</code>. Based on
   <code><a href='https://rdrr.io/pkg/survey/man/svyquantile.html'>svyquantile</a></code>.</p></dd>
 <dt><code><a href='unweighted.html'>unweighted</a></code></dt><dd><p>Calculate an unweighted estimate as you would on a regular <code>tbl_df</code>.
   Based on dplyr's <code><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></code>.</p></dd>

</dl>

<p>You can use expressions both in the <code>...</code> of <code>summarize</code> and also
in the arguments to the summarizing functions. Though this is valid syntactically
it can also allow you to calculate incorrect results (for example if you multiply
the mean by 100, the standard error is also multipled by 100, but the variance
is not).</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>api</span>, package <span class='op'>=</span> <span class='st'>"survey"</span><span class='op'>)</span>

<span class='va'>dstrata</span> <span class='op'>&lt;-</span> <span class='va'>apistrat</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='as_survey_design.html'>as_survey_design</a></span><span class='op'>(</span>strata <span class='op'>=</span> <span class='va'>stype</span>, weights <span class='op'>=</span> <span class='va'>pw</span><span class='op'>)</span>

<span class='va'>dstrata</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarise</span><span class='op'>(</span>api99_mn <span class='op'>=</span> <span class='fu'><a href='survey_mean.html'>survey_mean</a></span><span class='op'>(</span><span class='va'>api99</span><span class='op'>)</span>,
            api00_mn <span class='op'>=</span> <span class='fu'><a href='survey_mean.html'>survey_mean</a></span><span class='op'>(</span><span class='va'>api00</span><span class='op'>)</span>,
            api_diff <span class='op'>=</span> <span class='fu'><a href='survey_mean.html'>survey_mean</a></span><span class='op'>(</span><span class='va'>api00</span> <span class='op'>-</span> <span class='va'>api99</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 × 6</span>
#&gt;   api99_mn api99_mn_se api00_mn api00_mn_se api_diff api_diff_se
#&gt;      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>       <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>       <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>       <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span>     629.        10.1     662.        9.54     32.9        2.08</div><div class='input'>
<span class='va'>dstrata_grp</span> <span class='op'>&lt;-</span> <span class='va'>dstrata</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>stype</span><span class='op'>)</span>

<span class='va'>dstrata_grp</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarise</span><span class='op'>(</span>api99_mn <span class='op'>=</span> <span class='fu'><a href='survey_mean.html'>survey_mean</a></span><span class='op'>(</span><span class='va'>api99</span><span class='op'>)</span>,
            api00_mn <span class='op'>=</span> <span class='fu'><a href='survey_mean.html'>survey_mean</a></span><span class='op'>(</span><span class='va'>api00</span><span class='op'>)</span>,
            api_diff <span class='op'>=</span> <span class='fu'><a href='survey_mean.html'>survey_mean</a></span><span class='op'>(</span><span class='va'>api00</span> <span class='op'>-</span> <span class='va'>api99</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 3 × 7</span>
#&gt;   stype api99_mn api99_mn_se api00_mn api00_mn_se api_diff api_diff_se
#&gt;   <span style='color: #949494; font-style: italic;'>&lt;fct&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>       <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>       <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>       <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span> E         636.        13.3     674.        12.5    38.6         2.76
#&gt; <span style='color: #BCBCBC;'>2</span> H         617.        15.8     626.        15.5     8.46        3.41
#&gt; <span style='color: #BCBCBC;'>3</span> M         610.        16.8     637.        16.6    26.4         3.05</div><div class='input'>
<span class='co'># `dplyr::across` can be used to programmatically summarize multiple columns</span>
<span class='co'># See https://dplyr.tidyverse.org/articles/colwise.html for details</span>
<span class='co'># A basic example of working on 2 columns at once and then calculating the total</span>
<span class='co'># the mean</span>
<span class='va'>total_vars</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"enroll"</span>, <span class='st'>"api.stu"</span><span class='op'>)</span>
<span class='va'>dstrata</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarize</span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/across.html'>across</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/all_of.html'>all_of</a></span><span class='op'>(</span><span class='va'>total_vars</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>survey_total</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 × 4</span>
#&gt;     enroll enroll_se  api.stu api.stu_se
#&gt;      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span> 3<span style='text-decoration: underline;'>687</span>178.   <span style='text-decoration: underline;'>117</span>319. 3<span style='text-decoration: underline;'>086</span>009.    <span style='text-decoration: underline;'>101</span>841.</div><div class='input'>
<span class='co'># Expressions are allowed in summarize arguments &amp; inside functions</span>
<span class='co'># Here we can calculate binary variable on the fly and also multiply by 100 to</span>
<span class='co'># get percentages</span>
<span class='va'>dstrata</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarize</span><span class='op'>(</span>api99_over_700_pct <span class='op'>=</span> <span class='fl'>100</span> <span class='op'>*</span> <span class='fu'><a href='survey_mean.html'>survey_mean</a></span><span class='op'>(</span><span class='va'>api99</span> <span class='op'>&gt;</span> <span class='fl'>700</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 × 2</span>
#&gt;   api99_over_700_pct api99_over_700_pct_se
#&gt;                <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>                 <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span>               30.6                  3.61</div><div class='input'>
<span class='co'># But be careful, the variance doesn't scale the same way, so this is wrong!</span>
<span class='va'>dstrata</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarize</span><span class='op'>(</span>api99_over_700_pct <span class='op'>=</span> <span class='fl'>100</span> <span class='op'>*</span> <span class='fu'><a href='survey_mean.html'>survey_mean</a></span><span class='op'>(</span><span class='va'>api99</span> <span class='op'>&gt;</span> <span class='fl'>700</span>, vartype <span class='op'>=</span> <span class='st'>"var"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 × 2</span>
#&gt;   api99_over_700_pct api99_over_700_pct_var
#&gt;                <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>                  <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span>               30.6                  0.130</div><div class='input'><span class='co'># Wrong variance!</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Greg Freedman Ellis, Ben Schneider.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


