<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Summarise multiple values to a single value. — summarise • srvyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Summarise multiple values to a single value. — summarise"><meta name="description" content="Summarise multiple values to a single value."><meta property="og:description" content="Summarise multiple values to a single value."><meta property="og:image" content="http://gdfe.co/srvyr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">srvyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/srvyr-vs-survey.html">Overview</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/srvyr-vs-survey.html">srvyr Compared to the survey Package (Overview)</a></li>
    <li><a class="dropdown-item" href="../articles/srvyr-database.html">Databases in srvyr</a></li>
    <li><a class="dropdown-item" href="../articles/extending-srvyr.html">Extending srvyr</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gergness/srvyr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Summarise multiple values to a single value.</h1>
      <small class="dont-index">Source: <a href="https://github.com/gergness/srvyr/blob/HEAD/R/summarise.r" class="external-link"><code>R/summarise.r</code></a></small>
      <div class="d-none name"><code>summarise.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Summarise multiple values to a single value.</p>
    </div>


    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>tbl A <code>tbl_svy</code> object</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Name-value pairs of summarizing expressions, see details</p></dd>


<dt id="arg--groups">.groups<a class="anchor" aria-label="anchor" href="#arg--groups"></a></dt>
<dd><p>Defaults to "drop_last" in srvyr meaning that the last group is peeled
off, but if there are more groups they will be preserved. Other options are "drop", which
drops all groups, "keep" which keeps all of them and "rowwise" which converts the object
to a rowwise object (meaning calculations will be performed on each row).</p></dd>


<dt id="arg--unpack">.unpack<a class="anchor" aria-label="anchor" href="#arg--unpack"></a></dt>
<dd><p>Whether to "unpack" named <code>data.frame</code> columns. <code>srvyr</code> predates
<code>dplyr</code>'s support for data.frame columns so it does not treat them the same way by
default.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Summarise for <code>tbl_svy</code> objects accepts several specialized functions.
Each of the functions a variable (or two, in the case of
<code>survey_ratio</code>), from the data.frame and default to providing the measure
and its standard error.</p>
<p>The argument <code>vartype</code> can choose one or more measures of uncertainty,
<code>se</code> for standard error, <code>ci</code> for confidence interval, <code>var</code>
for variance, and <code>cv</code> for coefficient of variation. <code>level</code>
specifies the level for the confidence interval.</p>
<p>The other arguments correspond to the analogous function arguments from the
survey package.</p>
<p>The available functions from srvyr are:</p>
<dl><dt><code><a href="survey_mean.html">survey_mean</a></code></dt>
<dd><p>Calculate the mean of a numeric variable or the proportion falling into <code>groups</code>
   for the entire population or by <code>groups</code>. Based on <code><a href="https://rdrr.io/pkg/survey/man/surveysummary.html" class="external-link">svymean</a></code>
   and <code><a href="https://rdrr.io/pkg/survey/man/svyciprop.html" class="external-link">svyciprop</a></code>.</p></dd>
.
<dt><code><a href="survey_total.html">survey_total</a></code></dt>
<dd><p>Calculate the survey total of the entire population or by <code>groups</code>.
   Based on <code><a href="https://rdrr.io/pkg/survey/man/surveysummary.html" class="external-link">svytotal</a></code>.</p></dd>

<dt><code><a href="survey_mean.html">survey_prop</a></code></dt>
<dd><p>Calculate the proportion of the entire population or by <code>groups</code>.
   Based on <code><a href="https://rdrr.io/pkg/survey/man/svyciprop.html" class="external-link">svyciprop</a></code>.</p></dd>

 <dt><code><a href="survey_ratio.html">survey_ratio</a></code></dt>
<dd><p>Calculate the ratio of 2 variables in the entire population or by <code>groups</code>.
   Based on <code><a href="https://rdrr.io/pkg/survey/man/svyratio.html" class="external-link">svyratio</a></code>.</p></dd>

<dt><code><a href="survey_quantile.html">survey_quantile</a></code> &amp; <code><a href="survey_quantile.html">survey_median</a></code></dt>
<dd><p>Calculate quantiles in the entire population or by <code>groups</code>. Based on
   <code><a href="https://rdrr.io/pkg/survey/man/svyquantile.html" class="external-link">svyquantile</a></code>.</p></dd>

 <dt><code><a href="unweighted.html">unweighted</a></code></dt>
<dd><p>Calculate an unweighted estimate as you would on a regular <code>tbl_df</code>.
   Based on dplyr's <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></code>.</p></dd>


</dl><p>You can use expressions both in the <code>...</code> of <code>summarize</code> and also
in the arguments to the summarizing functions. Though this is valid syntactically
it can also allow you to calculate incorrect results (for example if you multiply
the mean by 100, the standard error is also multiplied by 100, but the variance
is not).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">api</span>, package <span class="op">=</span> <span class="st">"survey"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dstrata</span> <span class="op">&lt;-</span> <span class="va">apistrat</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="as_survey_design.html">as_survey_design</a></span><span class="op">(</span>strata <span class="op">=</span> <span class="va">stype</span>, weights <span class="op">=</span> <span class="va">pw</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dstrata</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">summarise</span><span class="op">(</span>api99_mn <span class="op">=</span> <span class="fu"><a href="survey_mean.html">survey_mean</a></span><span class="op">(</span><span class="va">api99</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            api00_mn <span class="op">=</span> <span class="fu"><a href="survey_mean.html">survey_mean</a></span><span class="op">(</span><span class="va">api00</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            api_diff <span class="op">=</span> <span class="fu"><a href="survey_mean.html">survey_mean</a></span><span class="op">(</span><span class="va">api00</span> <span class="op">-</span> <span class="va">api99</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   api99_mn api99_mn_se api00_mn api00_mn_se api_diff api_diff_se</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     629.        10.1     662.        9.54     32.9        2.08</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dstrata_grp</span> <span class="op">&lt;-</span> <span class="va">dstrata</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="group_by.html">group_by</a></span><span class="op">(</span><span class="va">stype</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dstrata_grp</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">summarise</span><span class="op">(</span>api99_mn <span class="op">=</span> <span class="fu"><a href="survey_mean.html">survey_mean</a></span><span class="op">(</span><span class="va">api99</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            api00_mn <span class="op">=</span> <span class="fu"><a href="survey_mean.html">survey_mean</a></span><span class="op">(</span><span class="va">api00</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            api_diff <span class="op">=</span> <span class="fu"><a href="survey_mean.html">survey_mean</a></span><span class="op">(</span><span class="va">api00</span> <span class="op">-</span> <span class="va">api99</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   stype api99_mn api99_mn_se api00_mn api00_mn_se api_diff api_diff_se</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> E         636.        13.3     674.        12.5    38.6         2.76</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> H         617.        15.8     626.        15.5     8.46        3.41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> M         610.        16.8     637.        16.6    26.4         3.05</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `dplyr::across` can be used to programmatically summarize multiple columns</span></span></span>
<span class="r-in"><span><span class="co"># See https://dplyr.tidyverse.org/articles/colwise.html for details</span></span></span>
<span class="r-in"><span><span class="co"># A basic example of working on 2 columns at once and then calculating the total</span></span></span>
<span class="r-in"><span><span class="co"># the mean</span></span></span>
<span class="r-in"><span><span class="va">total_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"enroll"</span>, <span class="st">"api.stu"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dstrata</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">summarize</span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of</a></span><span class="op">(</span><span class="va">total_vars</span><span class="op">)</span><span class="op">)</span>, <span class="va">survey_total</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     enroll enroll_se  api.stu api.stu_se</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 3<span style="text-decoration: underline;">687</span>178.   <span style="text-decoration: underline;">117</span>319. 3<span style="text-decoration: underline;">086</span>009.    <span style="text-decoration: underline;">101</span>841.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Expressions are allowed in summarize arguments &amp; inside functions</span></span></span>
<span class="r-in"><span><span class="co"># Here we can calculate binary variable on the fly and also multiply by 100 to</span></span></span>
<span class="r-in"><span><span class="co"># get percentages</span></span></span>
<span class="r-in"><span><span class="va">dstrata</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">summarize</span><span class="op">(</span>api99_over_700_pct <span class="op">=</span> <span class="fl">100</span> <span class="op">*</span> <span class="fu"><a href="survey_mean.html">survey_mean</a></span><span class="op">(</span><span class="va">api99</span> <span class="op">&gt;</span> <span class="fl">700</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   api99_over_700_pct api99_over_700_pct_se</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>               30.6                  3.61</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># But be careful, the variance doesn't scale the same way, so this is wrong!</span></span></span>
<span class="r-in"><span><span class="va">dstrata</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">summarize</span><span class="op">(</span>api99_over_700_pct <span class="op">=</span> <span class="fl">100</span> <span class="op">*</span> <span class="fu"><a href="survey_mean.html">survey_mean</a></span><span class="op">(</span><span class="va">api99</span> <span class="op">&gt;</span> <span class="fl">700</span>, vartype <span class="op">=</span> <span class="st">"var"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   api99_over_700_pct api99_over_700_pct_var</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>               30.6                  0.130</span>
<span class="r-in"><span><span class="co"># Wrong variance!</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Greg Freedman Ellis, Ben Schneider.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

